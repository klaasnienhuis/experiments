<!DOCTYPE HTML>
<html>

<head>
    <meta charset="UTF-8">
    <title>Watch Configurator</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,900,700,500,100,300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="./style/app.css">
</head>

<body>
    <iframe src="" id="api-frame" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true" width="640" height="480"></iframe>
    <img class="logo" src="assets/watch-logo.png" alt="" width="100">
    <div class="options">
        <h2>Choose band</h2>
        <ul id="bands">
            <li data-id="4" class="option_bracelet_rubberblue selected"></li>
            <li data-id="117" class="option_bracelet_cuir"></li>
            <li data-id="93" class="option_bracelet_rubberwhite"></li>
        </ul>
        <h2>Choose model</h2>
        <ul id="metals">
            <li data-id="63" class="option_coque_silverrough selected"></li>
            <li data-id="194" class="option_coque_silverglossy"></li>
            <li data-id="32" class="option_coque_goldgloss"></li>
        </ul>
    </div>
    <div class="instructions">
        Click to rotate<br>
        Scroll to zoom
    </div>
    <ul class="share-buttons">
        <li><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flabs.sketchfab.com%2Fexperiments%2Fwatch-configurator%2F&t=" title="Share on Facebook" target="_blank" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(document.URL) + '&t=' + encodeURIComponent(document.URL)); return false;"><img src="assets/Facebook.png"></a></li>
        <li><a href="https://twitter.com/intent/tweet?source=https%3A%2F%2Flabs.sketchfab.com%2Fexperiments%2Fwatch-configurator%2F&text=:%20https%3A%2F%2Flabs.sketchfab.com%2Fexperiments%2Fwatch-configurator%2F&via=Sketchfab" target="_blank" title="Tweet" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(document.title) + ':%20'  + encodeURIComponent(document.URL)); return false;"><img src="assets/Twitter.png"></a></li>
        <li><a href="https://plus.google.com/share?url=https%3A%2F%2Flabs.sketchfab.com%2Fexperiments%2Fwatch-configurator%2F" target="_blank" title="Share on Google+" onclick="window.open('https://plus.google.com/share?url=' + encodeURIComponent(document.URL)); return false;"><img src="assets/Google+.png"></a></li>
    </ul>

    <script type="text/javascript" src="https://static.sketchfab.com/api/sketchfab-viewer-1.12.1.js"></script>

    <script type="text/javascript">
        const iframe = document.getElementById('api-frame');
        const version = '1.12.1';
        const urlid = 'b5cfed180f6643c395de8157c52e0afe';
        const client = new Sketchfab(version, iframe);
        let api;

        client.init(urlid, {
            autostart: 1,
            ui_infos: 0,
            ui_stop: 0,
            ui_watermark: 0,
            ui_controls: 0,
            ui_inspector: 0,
            success: (clientApi) => {
                api = clientApi;
                api.addEventListener('viewerready', () => {
                    for (const id of [117, 93, 194, 32]) {
                        api.hide(id);
                    }

                    for (const type of ['bands', 'metals']) {
                        for (const option of document.querySelectorAll(`#${type} li`)) {
                            option.addEventListener('click', () => {
                                api.hide(document.querySelector(`#${type} .selected`).getAttribute('data-id'));
                                document.querySelector(`#${type} .selected`).classList.remove('selected');
                                option.classList.add('selected');
                                api.show(option.getAttribute('data-id'));
                            });
                        }
                    }
                });
            },
            error: () => window.console.log('Error while initializing the viewer')
        });
    </script>
</body>

</html>
